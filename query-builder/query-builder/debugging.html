<h1 id="debugging">Debugging</h1>
<h2 id="debugging-a-single-query">Debugging a Single Query</h2>
<h3 id="tosql">toSQL</h3>
<p>Returns the SQL that would be executed for the current query.</p>
<pre><code class="language-javascript">var q = query.from( &quot;users&quot; )
    .where( &quot;active&quot;, &quot;=&quot;, 1 );

writeOutput( q.toSQL() );</code></pre>
<p>The bindings for the query are represented by question marks  ?  just as when using queryExecute.  qb can replace each question mark with the corresponding cfqueryparam`-compatible struct by passing showBindings = true to the method.</p>
<pre><code class="language-javascript">var q = query.from( &quot;users&quot; )
    .where( &quot;active&quot;, &quot;=&quot;, 1 );

writeOutput( q.toSQL( showBindings = true ) );</code></pre>
<p>If you want to show the SQL that would be executed for the update, insert, updateOrInsert, or delete methods, you can pass a toSQL = true flag to those methods.  Please see those individual methods for more information.</p>
<h3 id="tap">tap</h3>
<p>Executes a callback with a clone of the current query passed to it.  Any changes to the passed query is ignored and the original query returned.</p>
<p>While not strictly a debugging method, tap makes it easy to see the changes to a query after each call without introducing temporary variables.</p>
<pre><code class="language-javascript">query.from( &quot;users&quot; )
    .tap( function( q ) {
        writeOutput( q.toSQL() &amp; &quot;&lt;br&gt;&quot; );
    } )
    .where( &quot;active&quot;, &quot;=&quot;, 1 )
    .tap( function( q ) {
        writeOutput( q.toSQL() &amp; &quot;&lt;br&gt;&quot; );
    } );</code></pre>
<h3 id="dump">dump</h3>
<p>A shortcut for the most common use case of tap.  This forwards on the SQL for the current query to writeDump.  You can pass along any writeDump argument to dump and it will be forward on.  Additionally, the showBindings argument will be forwarded on to the toSQL call.</p>
<pre><code class="language-javascript">query.from( &quot;users&quot; )
    .dump()
    .where( &quot;active&quot;, &quot;=&quot;, 1 )
    .dump( label = &quot;after where&quot;, showBindings = true, abort = true )
    .get();</code></pre>
<h2 id="debugging-all-queries">Debugging All Queries</h2>
<h3 id="cbdebugger">cbDebugger</h3>
<p>Starting in <a href="https://forgebox.io/view/cbdebugger">cbDebugger</a> 2.0.0 you can view all your qb queries for a request.  This is enabled by default if you have qb installed.  Make sure your debug output is configured correctly and scroll to the bottom of the page to find the debug output.</p>
<p><img src="../.gitbook/assets/2020-05-04_12-40.png" alt=""></p>
<h3 id="logbox-appender">LogBox Appender</h3>
<p>qb is set to log all queries to a debug log out of the box.  To enable this behavior, configure LogBox to allow debug logging from qb&#39;s grammar classes.</p>
<p>qb can be quite chatty when executing many database queries.  Make sure that this logging is only enabled for your development environments using <a href="https://coldbox.ortusbooks.com/getting-started/configuration/coldbox.cfc/configuration-directives/environments">ColdBox&#39;s environment controls</a>.</p>
<h3 id="coldbox-interception-points">ColdBox Interception Points</h3>
<p>ColdBox Interception Points can also be used for logging, though you may find it easier to use LogBox.  See the documentation for <a href="options-and-utilities/interception-points.md">qb&#39;s Interception Points</a> for more information.</p>
