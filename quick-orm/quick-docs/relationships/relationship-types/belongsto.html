<h1 id="belongsto">belongsTo</h1>
<p>A &#39;belongsTo&#39; relationship is a &#39;many-to-one&#39; relationship. For instance, a &#39;Post&#39; may belong to a &#39;User`.</p>
<pre><code class="language-javascript">// Post.cfc
component extends=&quot;quick.models.BaseEntity&quot; {

    function user() {
       return belongsTo( &quot;User&quot; );
    }

}</code></pre>
<p>The first value passed to &#39;belongsTo&#39; is a WireBox mapping to the related entity.</p>
<p>Quick determines the foreign key of the relationship based on the entity name and key values. In this case, the &#39;Post&#39; entity is assumed to have a &#39;userId&#39; foreign key. You can override this by passing a foreign key in as the second argument:</p>
<pre><code class="language-javascript">return belongsTo(&quot;User&quot;, &quot;FK_userID&quot;);</code></pre>
<p>If your parent entity does not use &#39;id&#39; as its primary key, or you wish to join the child entity to a different column, you may pass a third argument to the &#39;belongsTo&#39; method specifying your parent table&#39;s custom key.</p>
<pre><code class="language-javascript">return belongsTo(&quot;User&quot;, &quot;FK_userID&quot;, &quot;relatedPostId&quot;);</code></pre>
<p>The inverse of &#39;belongsTo&#39; is <a href="hasmany.md">&#39;hasMany&#39;</a> or <a href="hasone.md">&#39;hasOne&#39;</a>.</p>
<pre><code class="language-javascript">// User.cfc
component extends=&quot;quick.models.BaseEntity&quot; {

    function posts() {
        return hasMany( &quot;Post&quot; );
    }

    function latestPost() {
        // remember, relationships are just queries!
        return hasOne( &quot;Post&quot; ).orderBy( &quot;createdDate&quot;, &quot;desc&quot; );
    }

}</code></pre>
<h2 id="updating">Updating</h2>
<p>To update a &#39;belongsTo&#39; relationship, use the &#39;associate&#39; method. &#39;associate&#39; takes the entity to associate as the only argument.</p>
<pre><code class="language-javascript">var post = getInstance(&quot;Post&quot;).findOrFail(1);

var user = getInstance(&quot;User&quot;).findOrFail(1);

post.user().associate(user);

post.save();</code></pre>
<blockquote>
<p><strong>Note:</strong> &#39;associate&#39; does not automatically save the entity. Make sure to call &#39;save&#39; when you are ready to persist your changes to the database.</p>
</blockquote>
<h2 id="removing">Removing</h2>
<p>To remove a &#39;belongsTo&#39; relationship, use the &#39;dissociate&#39; method.</p>
<pre><code class="language-javascript">var post = getInstance(&quot;Post&quot;).findOrFail(1);

post.user().dissociate();

post.save();</code></pre>
<blockquote>
<p><strong>Note:</strong> &#39;dissociate&#39; does not automatically save the entity. Make sure to call &#39;save&#39; when you are ready to persist your changes to the database.</p>
</blockquote>
